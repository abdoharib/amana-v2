import{a2 as $,a1 as P,af as L,a as n,a4 as B,a6 as I,aQ as O,aP as b,j as D,f as U,o as F,d as i,n as h,t as w,v as _,Y as N}from"./main-DsrSJpTM.js";import{a as H,w as z}from"./index-BYrzgnBV.js";import{V as E}from"./VBadge-C9hFVu9Z.js";import{V as q,b as R,a as S}from"./VDivider-TiM_bgxF.js";import{V as J}from"./VMenu-BMTpQIU3.js";import{V as M,a as V,b as A,f as G}from"./VList-CvBcc7GJ.js";import"./forwardRefs-BzXRLNTL.js";const Q=P({start:Boolean,end:Boolean,...I(),...B()},"VListItemAction"),W=$()({name:"VListItemAction",props:Q(),setup(o,t){let{slots:r}=t;return L(()=>n(o.tag,{class:["v-list-item-action",{"v-list-item-action--start":o.start,"v-list-item-action--end":o.end},o.class],style:o.style},r)),{}}}),k="/build/assets/Vector-6RW6OTzU.png";class K extends Error{constructor(t,r){super(t,r),this.name="FetchError",r!=null&&r.cause&&!this.cause&&(this.cause=r.cause)}}function Y(o){var d,u,e,y,m;const t=((d=o.error)==null?void 0:d.message)||((u=o.error)==null?void 0:u.toString())||"",r=((e=o.request)==null?void 0:e.method)||((y=o.options)==null?void 0:y.method)||"GET",p=((m=o.request)==null?void 0:m.url)||String(o.request)||"/",f=`[${r}] ${JSON.stringify(p)}`,l=o.response?`${o.response.status} ${o.response.statusText}`:"<no response>",c=`${f}: ${l}${t?` ${t}`:""}`,s=new K(c,o.error?{cause:o.error}:void 0);for(const a of["request","options","response"])Object.defineProperty(s,a,{get(){return o[a]}});for(const[a,g]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(s,a,{get(){return o.response&&o.response[g]}});return s}const X=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function v(o="GET"){return X.has(o.toUpperCase())}function Z(o){if(o===void 0)return!1;const t=typeof o;return t==="string"||t==="number"||t==="boolean"||t===null?!0:t!=="object"?!1:Array.isArray(o)?!0:o.buffer?!1:o.constructor&&o.constructor.name==="Object"||typeof o.toJSON=="function"}const x=new Set(["image/svg","application/xml","application/xhtml","application/html"]),ee=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function oe(o=""){if(!o)return"json";const t=o.split(";").shift()||"";return ee.test(t)?"json":x.has(t)||t.startsWith("text/")?"text":"blob"}function te(o,t,r=globalThis.Headers){const p={...t,...o};if(t!=null&&t.params&&(o!=null&&o.params)&&(p.params={...t==null?void 0:t.params,...o==null?void 0:o.params}),t!=null&&t.query&&(o!=null&&o.query)&&(p.query={...t==null?void 0:t.query,...o==null?void 0:o.query}),t!=null&&t.headers&&(o!=null&&o.headers)){p.headers=new r((t==null?void 0:t.headers)||{});for(const[f,l]of new r((o==null?void 0:o.headers)||{}))p.headers.set(f,l)}return p}const se=new Set([408,409,425,429,500,502,503,504]),re=new Set([101,204,205,304]);function C(o={}){const{fetch:t=globalThis.fetch,Headers:r=globalThis.Headers,AbortController:p=globalThis.AbortController}=o;async function f(s){const d=s.error&&s.error.name==="AbortError"&&!s.options.timeout||!1;if(s.options.retry!==!1&&!d){let e;typeof s.options.retry=="number"?e=s.options.retry:e=v(s.options.method)?0:1;const y=s.response&&s.response.status||500;if(e>0&&(Array.isArray(s.options.retryStatusCodes)?s.options.retryStatusCodes.includes(y):se.has(y))){const m=s.options.retryDelay||0;return m>0&&await new Promise(a=>setTimeout(a,m)),l(s.request,{...s.options,retry:e-1,timeout:s.options.timeout})}}const u=Y(s);throw Error.captureStackTrace&&Error.captureStackTrace(u,l),u}const l=async function(d,u={}){var m;const e={request:d,options:te(u,o.defaults,r),response:void 0,error:void 0};if(e.options.method=(m=e.options.method)==null?void 0:m.toUpperCase(),e.options.onRequest&&await e.options.onRequest(e),typeof e.request=="string"&&(e.options.baseURL&&(e.request=H(e.request,e.options.baseURL)),(e.options.query||e.options.params)&&(e.request=z(e.request,{...e.options.params,...e.options.query}))),e.options.body&&v(e.options.method)&&(Z(e.options.body)?(e.options.body=typeof e.options.body=="string"?e.options.body:JSON.stringify(e.options.body),e.options.headers=new r(e.options.headers||{}),e.options.headers.has("content-type")||e.options.headers.set("content-type","application/json"),e.options.headers.has("accept")||e.options.headers.set("accept","application/json")):("pipeTo"in e.options.body&&typeof e.options.body.pipeTo=="function"||typeof e.options.body.pipe=="function")&&("duplex"in e.options||(e.options.duplex="half"))),!e.options.signal&&e.options.timeout){const a=new p;setTimeout(()=>a.abort(),e.options.timeout),e.options.signal=a.signal}try{e.response=await t(e.request,e.options)}catch(a){return e.error=a,e.options.onRequestError&&await e.options.onRequestError(e),await f(e)}if(e.response.body&&!re.has(e.response.status)&&e.options.method!=="HEAD"){const a=(e.options.parseResponse?"json":e.options.responseType)||oe(e.response.headers.get("content-type")||"");switch(a){case"json":{const g=await e.response.text(),j=e.options.parseResponse||O;e.response._data=j(g);break}case"stream":{e.response._data=e.response.body;break}default:e.response._data=await e.response[a]()}}return e.options.onResponse&&await e.options.onResponse(e),!e.options.ignoreResponseError&&e.response.status>=400&&e.response.status<600?(e.options.onResponseError&&await e.options.onResponseError(e),await f(e)):e.response},c=async function(d,u){return(await l(d,u))._data};return c.raw=l,c.native=(...s)=>t(...s),c.create=(s={})=>C({...o,defaults:{...o.defaults,...s}}),c}const T=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),ne=T.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),ae=T.Headers,ie=T.AbortController,ce=C({fetch:ne,Headers:ae,AbortController:ie});var pe={};const le=ce.create({baseURL:pe.VITE_API_BASE_URL||"/api",async onRequest({options:o}){const t=b("accessToken").value;t&&(o.headers={...o.headers,Authorization:`Bearer ${t}`,Accept:"application/json"})}}),ge={__name:"UserProfile",setup(o){const t=D(),r=b("userData").value,p=async()=>{try{await le("/auth/logout",{method:"POST"}),b("userData").value=null,b("accessToken").value=null,t.push({name:"login"})}catch(f){console.error("Error Logging out:",f)}};return(f,l)=>(F(),U(E,{dot:"",location:"bottom right","offset-x":"3","offset-y":"3",bordered:"",color:"success"},{default:i(()=>[n(q,{class:"cursor-pointer",color:"primary",variant:"tonal"},{default:i(()=>[n(R,{src:h(k)},null,8,["src"]),n(J,{activator:"parent",width:"230",location:"bottom end",offset:"14px"},{default:i(()=>[n(M,null,{default:i(()=>[n(V,null,{prepend:i(()=>[n(W,{start:""},{default:i(()=>[n(E,{dot:"",location:"bottom right","offset-x":"3","offset-y":"3",color:"success"},{default:i(()=>[n(q,{color:"primary",variant:"tonal"},{default:i(()=>[n(R,{src:h(k)},null,8,["src"])]),_:1})]),_:1})]),_:1})]),default:i(()=>[n(A,{class:"font-weight-semibold"},{default:i(()=>{var c;return[w(_((c=h(r))==null?void 0:c.name),1)]}),_:1}),n(G,null,{default:i(()=>{var c;return[w(_((c=h(r))==null?void 0:c.phone_number),1)]}),_:1})]),_:1}),n(S,{class:"my-2"}),n(S,{class:"my-2"}),n(V,{onClick:p},{prepend:i(()=>[n(N,{class:"me-2",icon:"tabler-logout",size:"22"})]),default:i(()=>[n(A,null,{default:i(()=>[...l[0]||(l[0]=[w("تسجيل خروج",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{ge as default};
